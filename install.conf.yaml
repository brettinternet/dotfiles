# https://github.com/anishathalye/dotbot/tree/master#directives

- defaults:
    link:
      create: true
      relink: true

- clean: ["~", "~/.config"]

- link:
    ~/.env:
      path: general/.env
    ~/.aliases:
      path: general/.aliases
    ~/.bash_profile:
      path: general/.bash_profile
      force: true
    ~/.bashrc:
      path: general/.bashrc
      force: true
    ~/.zshrc:
      path: general/.zshrc
      if: '[ -x "$(command -v zsh)" ]'
    ~/.zprofile:
      path: general/.zprofile
      if: '[ -x "$(command -v zsh)" ]'
    ~/.editorconfig:
      path: general/.editorconfig
    ~/.profile:
      path: general/.profile
    ~/.vimrc:
      path: general/.vimrc
      force: true
    ~/.vimrc.bundles:
      path: general/.vimrc.bundles
    ~/.tmux.conf:
      path: general/.tmux.conf
    ~/.xbindkeysrc:
      path: general/.xbindkeysrc
      if: 'xset q &>/dev/null'
    ~/.xbindkeysrc-mouse:
      path: general/.xbindkeysrc-mouse
      if: 'xinput | grep -q "Logitech MX Master"'
    ~/.xinitrc:
      path: general/.xinitrc
      if: 'xset q &>/dev/null'
    ~/.Xmodmap:
      path: general/.Xmodmap
      if: 'xset q &>/dev/null'
    ~/.xprofile:
      path: general/.xprofile
      if: 'xset q &>/dev/null'
    ~/.Xresources:
      path: general/.Xresources
      if: 'xset q &>/dev/null'
    ~/.xsession:
      path: general/.xsession
      if: 'xset q &>/dev/null'
    ~/.screenlayout:
      path: general/.screenlayout
      force: true
      if: 'xset q &>/dev/null'
    ~/.config/:
      glob: true
      path: general/.config/*
      if: 'xset q &>/dev/null'
    ~/.config/chrome-flags.conf:
      path: general/.config/chromium-flags.conf
      if: 'xset q &>/dev/null'
    ~/.config/fusuma:
      path: laptop/.config/fusuma
      if: '[ "$IS_LAPTOP" = "true" ] && xset q &>/dev/null'
    ~/.config/clight.conf:
      path: laptop/.config/clight.conf
      if: '[ "$IS_LAPTOP" = "true" ] && xset q &>/dev/null'

- create:
    - ~/dev
    - ~/dev/me
    - ~/dev/sandbox
    - ~/.npm-global

- shell:
    - [git submodule update --init --recursive, Update submodules]
    - command: "/bin/bash ./scripts/sync.sh"
      description: Sync package lists
      stdout: true
      stderr: true
      stdin: true
    - [vim -c 'PlugUpgrade' -c 'PlugUpdate' -c 'qa!', Update vim-plug]
    - command: '[[ "$SHELL" = *"zsh" ]] && (REHASH_FILE=$HOME/.cache/zsh/rehash; mkdir -p "${REHASH_FILE%/*}" && /usr/bin/touch -m "$REHASH_FILE") || echo "Skipping...current shell is $SHELL"'
      stdout: true
      stderr: true
      description: Rehash zsh $PATH
