# https://github.com/anishathalye/dotbot/tree/master#directives

- defaults:
    link:
      create: true
      relink: true

- clean:
    - "~"
    - "~/.config"
    - "~/.functions"

- link:
    ~/.aliases:
      path: src/.aliases
    ~/.bash_profile:
      path: src/.bash_profile
      force: true
    ~/.bashrc:
      path: src/.bashrc
      force: true
    ~/.zshrc:
      path: src/.zshrc
      if: '[ -x "$(command -v zsh)" ]'
    ~/.zprofile:
      path: src/.zprofile
      if: '[ -x "$(command -v zsh)" ]'
    ~/.editorconfig:
      path: src/.editorconfig
    ~/.profile:
      path: src/.profile
    ~/.vimrc:
      path: src/.vimrc
      force: true
    ~/.vimrc.bundles:
      path: src/.vimrc.bundles
    ~/.tmux.conf:
      path: src/.tmux.conf
    ~/.config/:
      glob: true
      path: src/.config/*
    ~/.functions/:
      glob: true
      path: src/.functions/*

- shell:
    - [git submodule update --recursive, Update submodules]
    - [vim -c 'PlugUpgrade' -c 'PlugUpdate' -c 'qa!', Update vim-plug]
    # https://wiki.archlinux.org/index.php/Zsh#Persistent_rehash
    - command: |
        '[[ "$SHELL" = *"zsh" ]] && (REHASH_FILE=$HOME/.cache/zsh/rehash; mkdir -p "${REHASH_FILE%/*}" && \
            /usr/bin/touch -m "$REHASH_FILE") || echo "Skipping...current shell is $SHELL"'
      stdout: true
      stderr: true
      description: Rehash zsh $PATH
